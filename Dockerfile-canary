FROM ansibleplaybookbundle/apb-base:canary

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBzZXJ2\
aWNlX25hbWUKICAgIGRlc2NyaXB0aW9uOiBUaGUgbmFtZSBvZiB0aGUgc2VydmljZS4gVXNlZCB0\
byBuYW1lIGFuZCBsYWJlbCByZXNvdXJjZXMKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDog\
bXlzcWwKICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV0rW2EtekEtWjAtOS1dKlthLXpBLVowLTld\
KyQiCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfdmVyc2lvbgogICAgZGVzY3Jp\
cHRpb246IFZlcnNpb24gb2YgTXlTUUwgdG8gZGVwbG95CiAgICB0eXBlOiBlbnVtCiAgICBlbnVt\
OiBbIjUuNiIsICI1LjciXQogICAgZGVmYXVsdDogIjUuNyIKICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICB1cGRhdGFibGU6IHRydWUKICAtIG5hbWU6IG15c3FsX2RhdGFiYXNlCiAgICBkZXNjcmlwdGlv\
bjogVGhlIG5hbWUgb2YgdGhlIE15U1FMIGRhdGFiYXNlCiAgICB0eXBlOiBzdHJpbmcKICAgIGRl\
ZmF1bHQ6IGRldmVsCiAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEt\
WjAtOV9dKiQiCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfdXNlcgogICAgZGVz\
Y3JpcHRpb246IFVzZXJuYW1lIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNvbm5lY3QgdG8gTXlTUUwK\
ICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogZGV2ZWwKICAgIHBhdHRlcm46ICJeW2EtekEt\
WjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgIHJlcXVpcmVkOiB0cnVlCiAgLSBu\
YW1lOiBteXNxbF9wYXNzd29yZAogICAgZGVzY3JpcHRpb246IFBhc3N3b3JkIHRvIGNvbm5lY3Qg\
dG8gTXlTUUwgKGdlbmVyYXRlZCBpZiBibGFuaykKICAgIHR5cGU6IHN0cmluZwogICAgcmVxdWly\
ZWQ6IHRydWUKICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKCnZlcnNpb246IDEuMApuYW1lOiBt\
eXNxbC1hcGIKZGVzY3JpcHRpb246ICJTb2Z0d2FyZSBDb2xsZWN0aW9ucyBNeVNRTCBBUEIiCmJp\
bmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgogIC0gZGF0YWJhc2UKICAtIG15c3Fs\
Cm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiAiTXlTUUwgKEFQQikiCiAgbG9uZ0Rlc2NyaXB0aW9u\
OiAiQW4gQW5zaWJsZSBQbGF5Ym9vayBCdW5kbGUgKEFQQikgdGhhdCBkZXBsb3lzIE15U1FMIgog\
IGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogaWNvbi1teXNxbC1kYXRhYmFzZQogIGRv\
Y3VtZW50YXRpb25Vcmw6ICJodHRwczovL2dpdGh1Yi5jb20vc2Nsb3JnL215c3FsLWNvbnRhaW5l\
ci8iCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhhdC5jb20vcmhz\
Y2wvbXlzcWwtNTYtcmhlbDcnCiAgICAtICdyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNj\
bC9teXNxbC01Ny1yaGVsNycKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIK\
cGxhbnM6CiAgLSBuYW1lOiBkZXYKICAgIGRlc2NyaXB0aW9uOiBBIE15U1FMIHNlcnZlciB3aXRo\
IGVwaGVtZXJhbCBzdG9yYWdlCiAgICBmcmVlOiB0cnVlCiAgICBkZWZhdWx0OiB0cnVlCiAgICBt\
ZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IERldmVsb3BtZW50CiAgICAgIGxvbmdEZXNjcmlw\
dGlvbjogVGhpcyBwbGFuIHByb3ZpZGVzIGEgc2luZ2xlIG5vbi1IQSBNeVNRTCBzZXJ2ZXIgd2l0\
aG91dCBwZXJzaXN0ZW50IHN0b3JhZ2UKICAgICAgY29zdDogJDAuMDAKICAgIHVwZGF0ZXNfdG86\
CiAgICAgIC0gcHJvZAogICAgcGFyYW1ldGVyczogKl9wYXJhbXMKICAtIG5hbWU6IHByb2QKICAg\
IGRlc2NyaXB0aW9uOiBBIE15U1FMIHNlcnZlciB3aXRoIHBlcnNpc3RlbnQgc3RvcmFnZQogICAg\
ZnJlZTogZmFsc2UKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogUHJvZHVjdGlvbgog\
ICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBwcm92aWRlcyBhIHNpbmdsZSBub24tSEEg\
TXlTUUwgc2VydmVyIHdpdGggMTAgR2lCIG9mIHBlcnNpc3RlbnQgc3RvcmFnZQogICAgICBjb3N0\
OiAkNS45OSBtb250aGx5CiAgICBwYXJhbWV0ZXJzOiAqX3BhcmFtcwogICAgdXBkYXRlc190bzoK\
ICAgICAgLSBkZXYK"


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles

USER apb
